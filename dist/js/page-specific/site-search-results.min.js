"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.swiftypeSearchResults=function(e,t,r,n){var i=void 0,a=function(e){var t=e.trim(),r=[];"+"===t[t.length-1]&&(t=t.slice(0,-1));for(var n=t.split("+"),i=0,a=n.length;i<a;i+=1){var c=decodeURIComponent(n[i]);c=c.replace(/[?#\\\/]/g," ").replace(/&/g,"and").trim();var u=encodeURIComponent(c);r.push(u)}return r.join("%20")},c=function(t,r){var i=r||1,c=a(t),u=n.siteSearch.urls.api+c+"/"+i;e.ajax(u).then(m,l)},u=function(t,r,i){var c=a(t),u=n.siteSearch.urls.trackClickThrough+c+"/"+r;e.ajax({type:"POST",url:u}).then(function(){return s(i)},l)},s=function(e){window.location=e},l=function(e){console.error(e)},o=function(e){return{highlight:e.highlight.body||e.highlight.sections||e.highlight.title,title:e.title,url:e.url,id:e.id}},p=function(e){for(var t=[],r=0,n=e.length;r<n;r+=1)t.push(o(e[r]));return t},g=function(e,t){for(var r=[],n=1;n<=e;n+=1)r.push({page:n,current:n===t});return r},h=function(e){return e.current_page*e.per_page<e.total_result_count?e.current_page*e.per_page:e.total_result_count},f=function(e){return(e.current_page-1)*e.per_page+1},d=function(t){var n=e("#swiftype-search-results-template").html();return r.compile(n)(t)},m=function(e){var t=e.info.page,r=e.records.page,n=t.query,a=t.num_pages>10,c=a?10:t.num_pages,u=h(t),s=f(t),l=t.spelling_suggestion?t.spelling_suggestion.text:void 0,o=p(r),m=g(c,t.current_page);t.base_url=window.location.pathname+"?q="+t.query+"&page=",t.index={first:s,last:u};var v={searchResult:o,info:t,pageLinks:m,tooManyResults:a,spellingSuggestion:l,query:n},y=d(v);i.html(y),i.find(".loading").hide(),i.find(".search-results-display").show()};return{calculateLastResultNumber:h,calculateFirstResultNumber:f,buildPageLinks:g,init:function(){var r=t.getAsDictionary();i=e("#search-results-target"),r.q?c(r.q,r.page):i.html("<p>There were no results found for this search.</p>")},trackClickThrough:function(t){var r=e(t.currentTarget),n=window.location.search.replace("?q=",""),i=r.attr("data-id"),a=r.attr("href");u(n,i,a)}}}(jQuery,bcpl.utility.querystringer,Handlebars,bcpl.constants),$(function(){$(document).on("click",".search-results-display a",bcpl.pageSpecific.swiftypeSearchResults.trackClickThrough),bcpl.pageSpecific.swiftypeSearchResults.init()});