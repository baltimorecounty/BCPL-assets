"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.swiftypeSearchResults=function(e,t,r,n){var i=void 0,a="",c=function(e){var t=e.trim(),r=[];"+"===t[t.length-1]&&(t=t.slice(0,-1));for(var n=t.split("+"),i=0,a=n.length;i<a;i+=1){var c=decodeURIComponent(n[i]);c=c.replace(/[?#\\\/]/g," ").replace(/&/g,"and").trim();var s=encodeURIComponent(c);r.push(s)}return r.join("%20")},s=function(t,r){var i=r||1,s=c(t),u=""+n.baseApiUrl+n.search.urls.api+"/"+s+"/"+i+"?filterType="+a;e.ajax(u).then(v,o)},u=function(t,r,i){var a=c(t),s=""+n.baseApiUrl+n.search.urls.trackClickThrough+"/"+a+"/"+r;e.ajax({type:"POST",url:s}).then(function(){return l(i)},o)},l=function(e){window.location=e},o=function(e){console.error(e)},p=function(e){return{highlight:e.highlight.body||e.highlight.sections||e.highlight.title,title:e.title,url:e.url,id:e.id}},g=function(e){return e.map(function(e){return p(e)})},h=function(e,t){for(var r=[],n=1;n<=e;n+=1)r.push({page:n,current:n===t});return r},f=function(e){return e.current_page*e.per_page<e.total_result_count?e.current_page*e.per_page:e.total_result_count},d=function(e){return(e.current_page-1)*e.per_page+1},m=function(t){var n=e("#swiftype-search-results-template").html();return r.compile(n,{noEscape:!0})(t)},v=function(e){var t=e.info.page,r=e.records.page,n=t.query,c=t.num_pages>10,s=c?10:t.num_pages,u=f(t),l=d(t),o=t.spelling_suggestion?t.spelling_suggestion.text:void 0,p=g(r),v=h(s,t.current_page),y=a&&"blog"===a;t.base_url=window.location.pathname+"?term="+t.query+"&page=",t.index={first:l,last:u};var b={searchResult:p,info:t,pageLinks:v,tooManyResults:c,spellingSuggestion:o,query:n,isBlog:y},_=m(b);i.html(_),i.find(".loading").hide().end().find(".search-results-display").show()};return{calculateLastResultNumber:f,calculateFirstResultNumber:d,buildPageLinks:h,init:function(){var r=t.getAsDictionary();a=r.filter,i=e("#search-results-target"),r.term?s(r.term,r.page):i.html('<div class="main-content top-border"><p>There were no results found for this search.</p></div>')},trackClickThrough:function(t){var r=e(t.currentTarget),n=window.location.search.replace("?term=",""),i=r.attr("data-id"),a=r.attr("href");u(n,i,a)}}}(jQuery,bcpl.utility.querystringer,Handlebars,bcpl.constants),$(function(){$(document).on("click",".search-results-display a",bcpl.pageSpecific.swiftypeSearchResults.trackClickThrough),bcpl.pageSpecific.swiftypeSearchResults.init()});