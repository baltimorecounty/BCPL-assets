"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.filter=function(n){var e={},t=function(n,e,t){var a=e.html(),i=Handlebars.compile(a),c=i(n);t.html(c),t.not(".collapse").is(":hidden")&&t.fadeIn(250)},a=function(n){var e=[];_.each(n,function(n){e=e.concat(n.amenities)});var t=_.uniq(e);return _.sortBy(t,function(n){return{ua:n}})},i=function(n,e){return _.intersection(n,e.amenities).length===n.length},c=function(){var a=[],c=[],r=n("#amenities label"),o=r.has("input:checked");r.not("input:checked").removeClass("active"),o.addClass("active"),o.each(function(n,e){a.push(e.innerText)}),_.each(e,function(n){i(a,n)&&c.push(n)}),c.length&&n("#branches").fadeOut(250,function(){t(c,n("#branches-template"),n("#branches"))})},r=function(i){e=i;var r=a(i);t(i,n("#branches-template"),n("#branches")),t(r,n("#amenities-template"),n("#amenities")),n("#amenities input").on("change",c)},o=function(n,e,t){console.log("err",t)},s=function(e){var t=n(e.target),a=t.parent().find("button"),i=n("#branches");a.toggleClass("btn-primary").toggleClass("btn-default"),t.parent().is("#sort-control")&&i.fadeOut(250,function(){var n=i.find(".card").detach();i.append(n.get().reverse()),i.fadeIn(250)}),t.parent().is("#list-grid-control")&&i.fadeOut(250,function(){i.toggleClass("list-view"),i.fadeIn(250)})};return{init:function(){n.ajax("/mockups/data/branch-amenities.json").done(r).fail(o),n(".filter-controls .btn-group-toggle").on("click",s)}}}(jQuery),$(function(){bcpl.pageSpecific.filter.init()});