"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.filter=function(e){var n={},i=function(e,n,i){var t=n.html(),a=Handlebars.compile(t),c=a(e);i.html(c),i.not(".collapse").is(":hidden")&&i.fadeIn(250)},t=function(e){var n=[];_.each(e,function(e){n=n.concat(e.amenities)});var i=_.uniq(n);return _.sortBy(i,function(e){return e})},a=function(e,n){return _.intersection(e,n.amenities).length===e.length},c=function(){var t=[],c=[],s=e("#amenities label"),o=s.has("input:checked");s.not("input:checked").removeClass("active"),o.addClass("active"),o.each(function(e,n){t.push(n.innerText)}),_.each(n,function(e){a(t,e)&&c.push(e)}),e("#window-shade").slideDown(250,function(){setTimeout(function(){e("#window-shade").slideUp(250)},2e3)}),e("#branches").fadeOut(250,function(){i({branches:c,length:c.length},e("#branches-template"),e("#branches"))})},s=function(a){n=a;var s=t(a);i({branches:a,length:a.length},e("#branches-template"),e("#branches")),i(s,e("#amenities-template"),e("#amenities")),e("#amenities input").on("change",c)},o=function(e,n,i){console.log("err",i)},l=function(n){e(n.currentTarget).siblings(".collapse-control").html('<i class="fa fa-minus"></i> Hide Filters')},r=function(n){e(n.currentTarget).siblings(".collapse-control").html('<i class="fa fa-plus"></i> Show Filters')};return{init:function(){e.ajax("/mockups/data/branch-amenities.json").done(s).fail(o),e(document).on("show.bs.collapse","#amenities",l),e(document).on("hide.bs.collapse","#amenities",r)}}}(jQuery),$(function(){bcpl.pageSpecific.filter.init()});