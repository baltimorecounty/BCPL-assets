"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.filter=function(e){var n={},t=function(e,n,t){var i=n.html(),c=Handlebars.compile(i),a=c(e);t.html(a),t.not(".collapse").is(":hidden")&&t.fadeIn(250)},i=function(e){var n=[];_.each(e,function(e){n=n.concat(e.amenities)});var t=_.uniq(n);return _.sortBy(t,function(e){return{ua:e}})},c=function(e,n){return _.intersection(e,n.amenities).length===e.length},a=function(){var i=[],a=[],o=e("#amenities label"),r=o.has("input:checked");o.not("input:checked").removeClass("active"),r.addClass("active"),r.each(function(e,n){i.push(n.innerText)}),_.each(n,function(e){c(i,e)&&a.push(e)}),a.length&&e("#branches").fadeOut(250,function(){t(a,e("#branches-template"),e("#branches"))})},o=function(c){n=c;var o=i(c);t(c,e("#branches-template"),e("#branches")),t(o,e("#amenities-template"),e("#amenities")),e("#amenities input").on("change",a)},r=function(e,n,t){console.log("err",t)};return{init:function(){e.ajax("/mockups/data/branch-amenities.json").done(o).fail(r),e(".filter-controls .btn-group-toggle").on("click",toggleButtonClicked)}}}(jQuery),$(function(){bcpl.pageSpecific.filter.init()});