"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.filter=function(e,n){var t={},i=void 0,c=function(e,n,t){var i=n.html(),c=Handlebars.compile(i),a=c(e);t.html(a),t.not(".collapse").is(":hidden")&&t.fadeIn(250)},a=function(e){var n=[];_.each(e,function(e){n=n.concat(e.amenities)});var t=_.uniq(n);return _.sortBy(t,function(e){return e})},s=function(e,n){return _.intersection(e,n.amenities).length===e.length},l=function(){var i=[],a=[],l=e("#amenities label"),o=l.has("input:checked");l.not("input:checked").removeClass("active"),o.addClass("active"),o.each(function(e,n){i.push(n.innerText)}),_.each(t,function(e){s(i,e)&&a.push(e)}),n.cycle(250,2e3);var r={branches:a,length:a.length};e("#branches").trigger("bcpl.locations.filter.changed",r).fadeOut(250,function(){c(r,e("#branches-template"),e("#branches"))})},o=function(n){t="string"==typeof n?JSON.parse(n):n;var i=a(t);c({branches:t,length:t.length},e("#branches-template"),e("#branches")),c(i,e("#amenities-template"),e("#amenities")),e("#amenities input").on("change",l)},r=function(e,n,t){console.log("err",t)},u=function(n){e(n.currentTarget).siblings(".collapse-control").html('<i class="fa fa-minus"></i> Hide Filters')},h=function(n){e(n.currentTarget).siblings(".collapse-control").html('<i class="fa fa-plus"></i> Show Filters')};return{init:function(){e.ajax("/mockups/data/branch-amenities.json").done(o).fail(r),i=document.createEvent("Event"),i.initEvent("bcpl.locations.filter.changed",!0,!0),e(document).on("show.bs.collapse","#amenities",u),e(document).on("hide.bs.collapse","#amenities",h)}}}(jQuery,bcpl.windowShade),$(function(){bcpl.pageSpecific.filter.init()});