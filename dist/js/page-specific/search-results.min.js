"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.search=function(e,r,t){var a=function(r){e.ajax("http://ba224964:3000/data/primaryMaterialType.json").then(function(e){return r(e)},function(e){return console.log(e)})},n=function(e,r,t){return Array.from({length:r-e+1},function(r,a){return{page:a+e,isCurrent:a+e===t}})},u=function(e,r){if(r<=1||r<e)return 1;var t=r-e;return e<=3&&r<=5?n(1,r,e):e<=3&&r>=5?n(1,5,e):t>=2?n(e-2,e+2,e):r<=5?n(1,r,e):n(r-4,r,e)},s=function(t){var n=t;n.ResultsPerPageButtons=[{count:10,isCurrent:10===t.ResultsPerPage},{count:25,isCurrent:25===t.ResultsPerPage},{count:50,isCurrent:50===t.ResultsPerPage},{count:100,isCurrent:100===t.ResultsPerPage}],n.PageNumbers=u(n.CurrentPage,n.Pages),a(function(t){_.map(n.SearchResults,function(e){e.icon=t[_.findIndex(t,{id:parseInt(e.PrimaryTypeOfMaterial,10)})].icon});var a=e("#search-results-template").html(),u=r.compile(a),s=u(n);e("#search-results").html(s)})},c=function(e){console.log(e)},i=function(r){var t=e(r.currentTarget),a=t.attr("data-results-per-page");window.location=window.location.pathname+"?q="+r.data.searchTerm+"&page="+r.data.pageNumber+"&resultsPerPage="+a},o=function(r){var t=e(r.currentTarget),a=t.attr("data-page-number");window.location=window.location.pathname+"?q="+r.data.searchTerm+"&page="+a+"&resultsPerPage="+r.data.resultsPerPage};return{init:function(){var r=t.getAsDictionary(),a=r.q.trim(),n=r.page?r.page:1,u=r.resultsperpage?r.resultsperpage:10;e(document).on("click","#pager .results-per-page button",{searchTerm:a,pageNumber:n,resultsPerPage:u},i),e(document).on("click","#pager .page-numbers button",{searchTerm:a,pageNumber:n,resultsPerPage:u},o),a&&e.get("http://ba224964:1000/api/polaris/search/"+a+"/"+n+"/"+u).then(s,c)}}}(jQuery,Handlebars,bcpl.utility.querystringer),$(function(){bcpl.pageSpecific.search.init()});