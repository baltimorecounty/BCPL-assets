"use strict";namespacer("bcpl.pageSpecific"),bcpl.pageSpecific.search=function(e,a,t){var r=function(a){e.ajax("http://ba224964:3000/data/primaryMaterialType.json").then(function(e){return a(e)},function(e){return console.log(e)})},n=function(t){r(function(r){_.map(t,function(e){e.icon=r[_.findIndex(r,{id:parseInt(e.PrimaryTypeOfMaterial,10)})].icon});var n=e("#search-results-template").html(),c=a.compile(n),i=c(t);e("#search-results").html(i)})},c=function(e){console.log(e)},i=function(a){var t=e(a.currentTarget),r=t.attr("data-results-per-page");window.location=window.location.pathname+"?q="+a.data.searchTerm+"&page="+a.data.pageNumber+"&resultsPerPage="+r},o=function(a){var t=e(a.currentTarget),r=t.attr("data-page-number");window.location=window.location.pathname+"?q="+a.data.searchTerm+"&page="+r+"&resultsPerPage="+a.data.resultsPerPage};return{init:function(){var a=t.getAsDictionary(),r=a.q,s=a.page,p=a.resultsperpage;e(document).on("click","#pager .results-per-page button",{searchTerm:r,pageNumber:s,resultsPerPage:p},i),e(document).on("click","#pager .page-numbers button",{searchTerm:r,pageNumber:s,resultsPerPage:p},o),e.get("http://ba224964:1000/api/polaris/search/"+r).then(n,c)}}}(jQuery,Handlebars,bcpl.utility.querystringer),$(function(){bcpl.pageSpecific.search.init()});