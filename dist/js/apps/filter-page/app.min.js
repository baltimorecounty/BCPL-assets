"use strict";!function(){angular.module("filterPageApp",[])}(),function(){var t=function(){var t=function(t){var a=[];angular.forEach(t,function(t){a=a.concat(t.attributes)});var e=_.uniq(a);return _.sortBy(e,function(t){return t})};return{get:function(a,e){a.dataLoader(function(a){var i=t(a);e(i,a)})}}};t.$inject=[],angular.module("filterPageApp").factory("cardService",t)}(),function(){var t=function(){return{get:function(t){switch(t){case"databases":return'<div class="card">\t<div class="row">\t\t<div class="col-sm-12 branch-address">\t\t\t<h4>\t\t\t\t<a href="#">{{cardData.name}}</a>\t\t\t</h4>\t\t\t<p>{{cardData.description}}</p>\t\t\t<div class="tags">Categories:\t\t\t\t<ul class="tag-list">\t\t\t\t\t<tag tag-data="cardData.attributes" active-filters="activeFilters" filter-handler="filterHandler"></tag>\t\t\t\t</ul>\t\t\t</div>\t\t</div>\t</div></div>';case"locations":return'<div class="card">\t<div class="row">\t\t<div class="col-sm-3 branch-name">\t\t\t<div class="branch-photo" style="background: url(/dist/images/branches/{{cardData.photo}})">\t\t\t\t<a href="#">{{cardData.name}}\t\t\t\t\t<i class="fa fa-caret-right" aria-hidden="true"></i>\t\t\t\t</a>\t\t\t</div>\t\t</div>\t\t<div class="col-sm-4 branch-address">\t\t\t<h4>{{cardData.name}} Branch</h4>\t\t\t<address>\t\t\t\t{{cardData.address}}\t\t\t\t<br/> {{cardData.city}}, MD {{cardData.zip}}\t\t\t</address>\t\t</div>\t\t<div class="col-sm-5 branch-email-phone">\t\t\t<div class="branch-email-phone-wrapper">\t\t\t\t<a href="mailto:{{cardData.email}}" class="branch-email">\t\t\t\t\t<i class="fa fa-envelope" aria-hidden="true"></i> Contact {{cardData.name}}\t\t\t\t</a>\t\t\t\t<a href="tel:{{cardData.phone}}" class="branch-phone">\t\t\t\t\t<i class="fa fa-phone" aria-hidden="true"></i> {{cardData.phone}}\t\t\t\t</a>\t\t\t</div>\t\t\t\t</div>\t</div>\t<div class="row">\t\t<div class="col-xs-12">\t\t\t<hr />\t\t</div>\t</div>\t<div class="row">\t\t<div class="col-xs-12">\t\t\t<div class="tags">\t\t\t\t<ul class="tag-list">\t\t\t\t\t<tag tag-data="cardData.attributes" active-filters="activeFilters" filter-handler="filterHandler"></tag>\t\t\t\t</ul>\t\t\t</div>\t\t</div>\t</div></div>';default:return""}}}};t.$inject=[],angular.module("filterPageApp").factory("templateService",t)}(),function(){var t=function(t,a){var e=this;e.activeFilters=[],e.allCardData={},e.setFilter=function(t){l(t),e.items=e.allCardData.filter(r),angular.element("#results-display").trigger("bcpl.filter.changed",{items:e.items})};var i=function(a,i){e.filters=a,e.allCardData=i,e.items=i,t.$apply(),angular.element("#results-display").trigger("bcpl.filter.changed",{items:e.items})},r=function(t){var a=0;return!!t&&(angular.element.each(e.activeFilters,function(e,i){-1!==t.attributes.indexOf(i)&&(a+=1)}),a===e.activeFilters.length)},l=function(t){var a=e.activeFilters.indexOf(t);-1===a?e.activeFilters.push(t):e.activeFilters.splice(a,1)};a.get(bcpl.pageSpecific.branchesFilter,i)};t.$inject=["$scope","cardService"],angular.module("filterPageApp").controller("FilterPageCtrl",t)}(),function(){var t=function(t,a){return{restrict:"E",scope:{filterHandler:"=",cardData:"=",activeFilters:"=",template:"="},template:"",link:function(e,i,r){i.append(t(a.get(r.template))(e))}}};t.$inject=["$compile","templateService"],angular.module("filterPageApp").directive("card",t)}(),function(){var t=function(t,a){t.toggleFilter=function(e){var i=angular.element(a);i.find("label").toggleClass("active",i.has(":checked")),t.filterHandler(e)}},a=function(){return{scope:{filterHandler:"=",filterName:"=",activeFilters:"="},restrict:"E",template:'<label ng-class="{active: activeFilters.indexOf(filterName) !== -1}"><input type="checkbox" ng-click="toggleFilter(filterName)" ng-checked="activeFilters.indexOf(filterName) !== -1" /> {{filterName}}</label>',link:t}};a.$inject=[],angular.module("filterPageApp").directive("filter",a)}(),function(){var t=function(t){t.toggleFilter=function(a,e){angular.element(e.currentTarget).toggleClass("active"),t.filterHandler(a)}},a=function(){return{scope:{filterHandler:"=",tagData:"=",activeFilters:"="},restrict:"E",template:'<li ng-repeat="tag in tagData"><button ng-click="toggleFilter(tag, $event)" ng-class="{active: activeFilters.indexOf(tag) !== -1}">{{tag}}</button></li>',link:t}};a.$inject=[],angular.module("filterPageApp").directive("tag",a)}();