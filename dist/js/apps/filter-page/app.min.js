"use strict";!function(){angular.module("filterPageApp",[])}(),function(t){var e=function(){var t={name:0,url:1,description:2,inPerson:3,requiresCard:4,attributes:5},e=function(t){var e=[];return t.each(function(t,a){e.push($(a).text())}),e},a=function(a,i){var r=$(a).find("#data-table"),n=r.find("tbody tr"),l=[];n.each(function(a,i){var r=$(i);l.push({name:r.find("td").eq(t.name).text(),url:r.find("td").eq(t.url).text(),description:r.find("td").eq(t.description).text(),inPerson:r.find("td").eq(t.inPerson).text(),requiresCard:r.find("td").eq(t.requiresCard).text(),attributes:e(r.find("td").eq(t.attributes).find(".SETags"))})}),i(l)};return{template:'<div class="card">\t<div class="row">\t\t<div class="col-sm-12 branch-address">\t\t\t<h4>\t\t\t\t<a href="#">{{cardData.name}}</a>\t\t\t</h4>\t\t\t<p>{{cardData.description}}</p>\t\t\t<div class="tags">Categories:\t\t\t\t<ul class="tag-list">\t\t\t\t\t<tag tag-data="cardData.attributes" active-filters="activeFilters" filter-handler="filterHandler"></tag>\t\t\t\t</ul>\t\t\t</div>\t\t</div>\t</div></div>',get:function(t,e){$.ajax("/mockups/data/bcpl-databases.html").done(function(e){a(e,t)}).fail(e)}}};t.factory("databasesService",e)}(angular.module("filterPageApp")),function(t){var e=function(){return{template:'<div class="card">\t<div class="row">\t\t<div class="col-sm-3 branch-name">\t\t\t<div class="branch-photo" style="background: url(/dist/images/branches/{{cardData.photo}})">\t\t\t\t<a href="#">{{cardData.name}}\t\t\t\t\t<i class="fa fa-caret-right" aria-hidden="true"></i>\t\t\t\t</a>\t\t\t</div>\t\t</div>\t\t<div class="col-sm-4 branch-address">\t\t\t<h4>{{cardData.name}} Branch</h4>\t\t\t<address>\t\t\t\t{{cardData.address}}\t\t\t\t<br/> {{cardData.city}}, MD {{cardData.zip}}\t\t\t</address>\t\t</div>\t\t<div class="col-sm-5 branch-email-phone">\t\t\t<div class="branch-email-phone-wrapper">\t\t\t\t<a href="mailto:{{cardData.email}}" class="branch-email">\t\t\t\t\t<i class="fa fa-envelope" aria-hidden="true"></i> Contact {{cardData.name}}\t\t\t\t</a>\t\t\t\t<a href="tel:{{cardData.phone}}" class="branch-phone">\t\t\t\t\t<i class="fa fa-phone" aria-hidden="true"></i> {{cardData.phone}}\t\t\t\t</a>\t\t\t</div>\t\t\t\t</div>\t</div>\t<div class="row">\t\t<div class="col-xs-12">\t\t\t<hr />\t\t</div>\t</div>\t<div class="row">\t\t<div class="col-xs-12">\t\t\t<div class="tags">\t\t\t\t<ul class="tag-list">\t\t\t\t\t<tag tag-data="cardData.attributes" active-filters="activeFilters" filter-handler="filterHandler"></tag>\t\t\t\t</ul>\t\t\t</div>\t\t</div>\t</div></div>',get:function(t,e){$.ajax("/mockups/data/branch-amenities.json").done(t).fail(e)}}};t.factory("locationsService",e)}(angular.module("filterPageApp")),function(t){var e=function(t,e,a){var i=function(t){var e=[];angular.forEach(t,function(t){e=e.concat(t.attributes)});var a=_.uniq(e);return _.sortBy(a,function(t){return t})},r=function(t){var e=t.split("/");return e[e.length-1].split(".")[0]};return{get:function(t){var n=r(e.location.pathname);a.get(n+"Service").get(function(e){var a=i(e);t(a,e)})}}};e.$inject=["$location","$window","$injector"],t.factory("cardService",e)}(angular.module("filterPageApp"));var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){var e=function(){var t=function(t,e){var a=t.filter(function(t){return t.name===e});if(0===a.length){return{name:e,type:"many"}}return 1===a.length?a[0]:{}};return{parseTags:function(e){if("object"!==(void 0===e?"undefined":_typeof(e)))return[];var a=[];return e.forEach(function(e){var i=e.split("|");if(1===i.length){var r=t(a,"none");r.tags||angular.extend(r,{tags:[]}),r.tags.push(i[0])}}),a}}};t.factory("tagParsingService",e)}(angular.module("filterPageApp")),function(t){var e=function(t,e){var a=this;a.activeFilters=[],a.allCardData={},a.setFilter=function(t){n(t),a.items=a.allCardData.filter(r),angular.element("#results-display").trigger("bcpl.filter.changed",{items:a.items})};var i=function(e,i){a.filters=e,a.allCardData=i,a.items=i,t.$apply(),angular.element("#results-display").trigger("bcpl.filter.changed",{items:a.items})},r=function(t){var e=0;return!!t&&(angular.element.each(a.activeFilters,function(a,i){-1!==t.attributes.indexOf(i)&&(e+=1)}),e===a.activeFilters.length)},n=function(t){var e=a.activeFilters.indexOf(t);-1===e?a.activeFilters.push(t):a.activeFilters.splice(e,1)};e.get(i)};e.$inject=["$scope","cardService"],t.controller("FilterPageCtrl",e)}(angular.module("filterPageApp")),function(){var t=function(t,e){return{restrict:"E",scope:{filterHandler:"=",cardData:"=",activeFilters:"=",template:"="},template:"",link:function(a,i,r){i.append(t(e.get(r.template+"Service").template)(a))}}};t.$inject=["$compile","$injector"],angular.module("filterPageApp").directive("card",t)}(),function(){var t=function(){return{scope:{filterHandler:"=",filterName:"=",activeFilters:"="},restrict:"E",template:'<label ng-class="{active: activeFilters.indexOf(filterName) !== -1}"><input type="checkbox" ng-click="toggleFilter(filterName)" ng-checked="activeFilters.indexOf(filterName) !== -1" /> {{filterName}}</label>',link:function(t,e){t.toggleFilter=function(a){var i=angular.element(e);i.find("label").toggleClass("active",i.has(":checked")),t.filterHandler(a)}}}};t.$inject=[],angular.module("filterPageApp").directive("filter",t)}(),function(){var t=function(){return{scope:{filterHandler:"=",filterName:"=",activeFilters:"="},restrict:"E",template:'<label ng-class="{active: activeFilters.indexOf(filterName) !== -1}"><input type="checkbox" ng-click="toggleFilter(filterName)" ng-checked="activeFilters.indexOf(filterName) !== -1" /> {{filterName}}</label>',link:function(t,e){t.toggleFilter=function(a){var i=angular.element(e);i.find("label").toggleClass("active",i.has(":checked")),t.filterHandler(a)}}}};t.$inject=[],angular.module("filterPageApp").directive("filters",t)}(),function(){var t=function(t){t.toggleFilter=function(e,a){angular.element(a.currentTarget).toggleClass("active"),t.filterHandler(e)},t.extractTagName=function(t){var e=t.split("|");return e.length>0?e[1]:e[0]}},e=function(){return{scope:{filterHandler:"=",tagData:"=",activeFilters:"="},restrict:"E",template:'<li ng-repeat="tag in tagData"><button ng-click="toggleFilter(tag, $event)" ng-class="{active: activeFilters.indexOf(tag) !== -1}">{{extractTagName(tag)}}</button></li>',link:t}};e.$inject=[],angular.module("filterPageApp").directive("tag",e)}();