"use strict";!function(){var e=angular.module("sharedFilters",[]),t=function(e){var t=function(e,t){var n=Object.assign({},t);return e&&delete n[e],n},n=function(n){if(!n)return void e.search({});var a=Object.assign({},e.search());n.forEach(function(e){a=t(e,a)}),e.search(a)},a=function(e,t){return!!t&&!!Object.keys(e).filter(function(e){return e.toLowerCase()===t.toLowerCase()}).length},r=function(e,t){return e?e.indexOf(",")>-1?t?e:e.split(","):[e]:[]},i=function(){return e.search()},o=function(e,t,n){return Object.hasOwnProperty.call(e,t)?r(e[t],n):n?"":[]},s=function(t){t.forEach(function(t){var n=t.key,a=t.val;if(n){var r=e.search();r[n]=a,e.search(r)}})};return{clearQueryParams:n,doesKeyExist:a,getFiltersFromString:r,getQueryParams:i,getQueryParamValuesByKey:o,setQueryParams:s,updateQueryParams:function(e){var t=i();e.forEach(function(e){var r=e.key,i=e.val;if(a(t,r)){var u=o(t,r),l=u.includes(i),c=[];if(l){var d=u.indexOf(i);u.splice(d,1)}else u.push(i);c=u,c.length?s([{key:r,val:c.join(",")}]):n([r])}else s([{key:r,val:i}])})}}};e.factory("sharedFilters.filterHelperService",["$location",t])}(),namespacer("bcpl"),bcpl.boostrapCollapseHelper=function(e){return{toggleCollapseByIds:function(t){var n=t.activePanels,a=t.inActivePanels;n.forEach(function(t){e("#"+t).collapse("show")}),a.forEach(function(t){e("#"+t).collapse("hide")})}}}(jQuery),function(){angular.module("eventsPageApp",["dataServices","events","sharedFilters","ngAria","ngRoute","ngSanitize"])}(),function(){var e=angular.module("events",[]),t={baseUrl:"https://services.bcpl.info",serviceUrls:{events:"/api/evanced/signup/events",eventRegistration:"/api/evanced/signup/registration",eventTypes:"/api/evanced/signup/eventtypes"},remoteServiceUrls:{ageGroups:"https://bcpl.evanced.info/api/signup/agegroups",locations:"https://bcpl.evanced.info/api/signup/locations"},templateUrls:{datePickersTemplate:"/_js/apps/events-page/templates/datePickers.html",eventsListTemplate:"/_js/apps/events-page/templates/eventsList.html",filtersTemplate:"/_js/apps/events-page/templates/filters.html",filtersExpandosTemplate:"/_js/apps/events-page/templates/filters-expandos.html",loadMoreTemplate:"/_js/apps/events-page/templates/loadMore.html",featuredEventsTemplate:"/_js/apps/events-page/templates/featuredEvents.html"},partialUrls:{eventListPartial:"/_js/apps/events-page/partials/eventList.html",eventDetailsPartial:"/_js/apps/events-page/partials/eventDetails.html",eventRegistrationPartial:"/_js/apps/events-page/partials/eventRegistration.html"},requestChunkSize:10};e.constant("events.CONSTANTS",t)}(),function(e){var t=function(e,t,n){t.when("/",{templateUrl:n.partialUrls.eventListPartial,controller:"EventsPageCtrl",controllerAs:"eventsPage",reloadOnSearch:!1}).when("/:id",{templateUrl:n.partialUrls.eventDetailsPartial,controller:"EventDetailsCtrl",controllerAs:"eventDetailsPage"}).when("/register/:id",{templateUrl:n.partialUrls.eventRegistrationPartial,controller:"EventRegistrationCtrl",controllerAs:"eventRegistrationPage"})},n=function(e,t){var n=t.absUrl();if(-1===n.indexOf("#!")&&n.indexOf("?")>-1){var a=bcpl.utility.querystringer.getAsDictionary().eventid;e.location=a?"/events-and-programs/list.html#!/"+a:"/events-and-programs/list.html#!/"+e.location.search}};t.$inject=["$locationProvider","$routeProvider","events.CONSTANTS"],n.$inject=["$window","$location"],e.config(t).run(n)}(angular.module("eventsPageApp")),function(e){var t=angular.module("dataServices",[]),n=function(t,n,a){var r=function(e,t){return new Date(e.EventStart).toLocaleDateString()===t},i=function(t){var n=[],a=void 0;return angular.forEach(t,function(i){var o=i.EventStart?i:f(i,e()),s=new Date(o.EventStart).toLocaleDateString();if(a!==s){var u=o.EventStart||o.OnGoingStartDate,l=t.filter(function(e){return r(e,s)});n.push({date:new Date(u),events:l}),a=s}}),n},o=function(t,n){return e(t.date).isSame(n.date,"day")?0:e(t.date).isBefore(n.date)?-1:1},s=function(e){return a(function(a,r){n.post(t.baseUrl+t.serviceUrls.events,e).then(function(e){if(e.data){var t=i(e.data.Events),n=t.sort(o);a({eventGroups:n,totalResults:e.data.TotalResults})}else r(e)},r)})},u=function(r){return a(function(a,i){n.get(t.baseUrl+t.serviceUrls.events+"/"+r).then(function(t){if(t.data){t.data.Description&&(t.data.Description=t.data.Description.replace(/<[\w\/]+>/g,""));t.data.registrationStarts=e(t.data.EventStart).subtract(7,"days"),t.data.registrationEnds=e(t.data.EventStart).subtract(30,"minutes"),t.data.registrationStartsDisplay=l(t.data.registrationStarts.format("M/D/YYYY @ h:mm a")),t.data.registrationEndsDisplay=l(t.data.registrationEnds.format("M/D/YYYY @ h:mm a")),t.data.onGoingStartDate=e(t.data.OnGoingStartDate).format("M/D/YYYY"),t.data.onGoingEndDate=e(t.data.OnGoingEndDate).format("M/D/YYYY"),t.data.isStarted=e(t.data.EventStart).isBefore(),t.data.isRegistrationClosed=t.data.registrationEnds.isBefore(),t.data.isRegistrationWindow=e().isBetween(t.data.registrationStarts,t.data.registrationEnds),t.data.isFull=1===t.data.RegistrationTypeCodeEnum&&0===t.data.MainSpotsAvailable,t.data.isWaiting=t.data.WaitSpotsAvailable>0,t.data.requiresRegistration=0!==t.data.RegistrationTypeCodeEnum,t.data.shouldDisplayRegistrationButton=d(t.data),a(t.data)}else i(t)},i)})},l=function(e){return e.replace(":00","").replace(/\w\w$/,function(e){return e.split("").join(".")+"."})},c=function(t){var n=t,a=e(t.EventStart);return n.eventMonth=a.format("MMM"),n.eventDate=a.format("D"),n.eventTime=l(a.format("h:mm a")),n.requiresRegistration=0!==n.RegistrationTypeCodeEnum,n},d=function(e){return!e.isStarted&&e.isRegistrationWindow&&e.requiresRegistration&&(!e.isFull||e.isFull&&e.isWaiting)},v=function(e){var t=[];return e.forEach(function(e){var n=c(e);t.push(n)}),t},f=function(t,n){var a=e(t.OnGoingStartDate),r=e(a).isSame(n,"day"),i=t,o=a.isAfter(n);return i.EventStart=(o||r)&&t.OnGoingStartDate,i.EventStart||(i.EventStart=n),i};return{get:s,getById:u,getFeaturedEvents:function(e){return a(function(a,r){n.post(t.baseUrl+t.serviceUrls.events,e).then(function(e){e.data?a(v(e.data.Events)):r(e)},r)})}}};n.$inject=["events.CONSTANTS","$http","$q"],t.factory("dataServices.eventsService",n)}(window.moment),function(e){var t=function(e,t){return{request:function(n){return t(function(t,a){e.get(n).then(function(e){t(e.data)},function(e){a(e)})})}}};t.$inject=["$http","$q"],e.factory("metaService",t)}(angular.module("eventsPageApp")),function(e){var t=function(e,t,n){return{register:function(a){return n(function(n,r){t.post(e.baseUrl+e.serviceUrls.eventRegistration,a).then(function(e){e.data?n({data:e.data}):r(e)},r)})}}};t.$inject=["events.CONSTANTS","$http","$q"],e.factory("registrationService",t)}(angular.module("eventsPageApp"));var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t=function(){var e=function(e,t){var n="string"==typeof e?new Date(e):e;return"object"!==(void 0===n?"undefined":_typeof(n))?n:(n.setDate(n.getDate()+t),n)},t=function(e,t,r){var i=e.EventStart||null,o=e.OnGoingStartDate,s=e.OnGoingEndDate;if(r)return"All Day";if(!i&&!o&&!s||i&&isNaN(Date.parse(i)))return"Bad start date format";if(i&&("number"!=typeof t||t<0))return"Bad event length format";if(o&&s){return moment(o).format("M/D")+" to "+moment(s).format("M/D")}var u=moment(i),l=moment(i).add(t,"m"),c=n(u),d=u.minute(),v=a(u),f=n(l),p=l.minute(),m=a(l);return c+(0===d?"":":"+d)+" "+(v===m?"":v)+" to "+f+(0===p?"":":"+p)+" "+m},n=function(e){var t=e.hour();return 0===t?12:t<=12?t:t-12},a=function(e){return e.hour()<12?"a.m.":"p.m."};return{addDays:e,formatSchedule:t}};e.factory("dateUtilityService",t)}(angular.module("eventsPageApp")),function(e,t){var n=function(e){var n=function(e){var n=e.eventTitle,a=e.eventDescription,r=e.eventLocation,i=e.eventStartDate,o=e.eventEndDate,s=new t;return s.addEvent(n,a,r,i,o),s},a=function(e){var t=i(e);n(t).download(t.eventTitle)},r=function(e){var t=e.split(" ");if(2===t.length){var n=t[0].trim(),a=t[1].trim();return(n.indexOf(":")>-1?n+":00":n+":00:00")+" "+a}return e},i=function(e){var t=e.Description,n=e.LocationName,a=e.Title,r="Baltimore County Public Library, "+n+" Branch - "+a,i=n+" Branch",o=l(e);return{eventTitle:r,eventDescription:t,eventLocation:i,eventStartDate:o.eventStartDate,eventEndDate:o.eventEndDate}},o=function(t,n){var a=n.AllDay,r=n.EventSchedule,i=n.EventStart,o=n.OnGoingEndDate,u=e.moment(t).format("MM/DD/YYYY"),l=s(r,a),c=i?u+" "+l:o;return e.moment(c).format("MM/DD/YYYY h:mm:ss a")},s=function(e,t){if(t)return"11:59:59 PM";var n=e.split("to");return 2===n.length?r(n[1].trim().replace(/\./g,"")):null},u=function(t){var n=t.EventStart,a=t.OnGoingStartDate,r=n||a;return e.moment(r).format("MM/DD/YYYY h:mm:ss a")},l=function(e){var t=u(e);return{eventStartDate:t,eventEndDate:o(t,e)}};return{createEvent:n,downloadCalendarEvent:a,getCalendarParts:i,getEndDate:o,getEndTime:s,getStartDate:u,getEventDates:l,formatTime:r}};n.$inject=["$window"],e.factory("downloadCalendarEventService",n)}(angular.module("eventsPageApp"),window.ics),function(e){var t=function(){var e=function(e){return e.replace("!","%21").replace("#","%23")},t=function(t){return"Check out this event at the Baltimore County Public Library: "+e(t)},n=function(e){return e.EventStartDate+" - "+e.Title};return{cleanUrl:e,getEmailBody:t,getEmailSubject:n,getShareUrl:function(e,a){var r=t(a);return"mailto:?subject="+n(e)+"&body="+r}}};e.factory("emailUtilityService",t)}(angular.module("eventsPageApp")),function(e){var t=function(){return{build:function(e){if(!e)return"";var t=Object.entries(e),n="";return t.length&&angular.forEach(t,function(e){n+=e[0]+"="+e[1]+"&"}),n}}};e.factory("querystringService",t)}(angular.module("eventsPageApp")),function(e){var t=function(e,t){return function(n){var a=n||{},r=e.moment().format(),i=e.moment().add(30,"d").format();return{StartDate:a.StartDate||r,EndDate:a.EndDate||i,Page:a.Page||1,IsOngoingVisible:a.IsOngoingVisible||!0,IsSpacesReservationVisible:a.IsSpacesReservationVisible||!1,Limit:a.limit||t.requestChunkSize,EventsTypes:a.eventTypes||[],AgeGroups:a.AgeGroups||[],Locations:a.locations||[],Keyword:a.Keyword||""}}};t.$inject=["$window","events.CONSTANTS"],e.factory("RequestModel",t)}(angular.module("eventsPageApp")),function(e,t){var n=function(e,t,n,a,r,i,o,s,u){t.scrollTo(0,0);var l=this,c=a.id;l.data={},l.data.EventStartDate="",l.data.EventStartTime="",l.data.EventEndTime="",l.isLoading=!0,l.isError=!1,l.requestErrorMessage="Unfortunately, there was a problem loading this event's details. Please try again in a few minutes.";var d=function(e){l.data=e,l.data.EventStartDate=t.moment(l.data.EventStart).format("MMMM D, YYYY"),l.data.EventSchedule=o.formatSchedule(l.data,l.data.EventLength,l.data.AllDay),l.isRegistrationRequired=0!==l.data.RegistrationTypeCodeEnum;var n=l.data.EventStart||l.data.OnGoingStartDate;l.eventDayOfWeek=t.moment(n).format("dddd"),l.onGoingEventEndDayOfWeek=l.data.OnGoingEndDate&&t.moment(l.data.OnGoingEndDate).format("dddd"),l.isOver=l.data.EventStart?t.moment().isAfter(t.moment(n).add(l.data.EventLength,"m")):t.moment().startOf("day").isAfter(t.moment(n).endOf("day")),l.isLoading=!1,l.shareUrl=s.getShareUrl(l.data,t.location.href)};l.downloadEvent=function(e){e.preventDefault(),u.downloadCalendarEvent(l.data)};var v=function(e){l.isLoading=!1,l.isError=!0};i.getById(c).then(d).catch(v)};n.$inject=["$scope","$window","$timeout","$routeParams","events.CONSTANTS","dataServices.eventsService","dateUtilityService","emailUtilityService","downloadCalendarEventService"],e.controller("EventDetailsCtrl",n)}(angular.module("eventsPageApp"),window.ics),function(e,t){var n=function(e,n,a,r,i,o,s,u){e.scrollTo(0,0);var l=a.id,c=this;c.showGroups=!1,c.isGroup="false",c.isSubmitted=!1,c.isLoadingResults=!1,c.formConfirmationMessage=null;var d=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"ConfirmationMessage")&&e.ConfirmationMessage&&e.ConfirmationMessage.length};c.downloadEvent=function(e){e.preventDefault(),u.downloadCalendarEvent(c.data)},c.isFieldValid=function(e,t){return(e[t].$touched||e.$submitted)&&e[t].$invalid},c.submitHandler=function(e,n){if(!n.$valid)return void(c.isLoadingResults=!1);var a={EventId:parseInt(l,10),FirstName:c.firstName,LastName:c.lastName,Email:c.email,Phone:t("phoneNumber",c.phone,"xxx-xxx-xxxx"),IsGroup:"true"===c.isGroup,GroupCount:c.groupCount};i.register(a).then(function(e){var t=angular.element(".main-content").first().offset().top;c.postResult=e.data;var n=c.postResult.Data;if(d(n))c.formConfirmationMessage=n.ConfirmationMessage;else{var a=c.postResult&&Object.prototype.hasOwnProperty.call(c.postResult,"Errors")&&c.postResult.Errors.length;c.formConfirmationMessage=a?c.postResult.Errors[0].Error:"Something went wrong, please try again later"}c.isSubmitted=!0,c.isLoadingResults=!1,angular.element("html, body").animate({scrollTop:t},250)})};var v=function(t){c.data=t,c.data.EventStartDate=e.moment(c.data.EventStart).format("MMMM D, YYYY"),c.data.EventSchedule=o.formatSchedule(c.data,c.data.EventLength,c.data.AllDay),c.shareUrl=s.getShareUrl(c.data,e.location.href)};r.getById(l).then(v)};n.$inject=["$window","$scope","$routeParams","dataServices.eventsService","registrationService","dateUtilityService","emailUtilityService","downloadCalendarEventService"],e.controller("EventRegistrationCtrl",n)}(angular.module("eventsPageApp"),bcpl.utility.format),function(e,t){var n=function(e,n,a,r,i,o,s,u,l,c,d){var v=this,f=["locations","eventTypes","ageGroups"],p=function(){return o.moment().format()},m=function(){return o.moment().add(30,"d").format()};v.requestModel=new d;var g={zIndex:100,responsiveWidth:!0};v.eventGroups=[],v.keywords="",v.chunkSize=s.requestChunkSize,v.totalResults=0,v.isLastPage=!1,v.areDatesInvalid=!1,v.isLoading=!0,v.hasResults=!0,v.data={},v.locations=[],v.eventsTypes=[],v.ageGroups=[];var h=function(e){var t=[],n=[];return e.Locations.length?t.push("locations"):n.push("locations"),e.EventsTypes.length?t.push("eventTypes"):n.push("eventTypes"),e.AgeGroups.length?t.push("ageGroups"):n.push("ageGroups"),{activePanels:t,inActivePanels:n}};v.filterEvents=function(e,n,a){v.eventGroups=[],v.isLoading=!0,v.hasResults=!0,v.requestErrorMessage="",v.requestModel=e;var r=angular.element("#start-date")[0]._flatpickr,i=angular.element("#end-date")[0]._flatpickr;r&&r.setDate(o.moment(e.StartDate).toDate()),i&&i.setDate(o.moment(e.EndDate).toDate()),v.userStartDate=o.moment(e.StartDate).format("MMMM DD, YYYY"),v.userEndDate=o.moment(e.EndDate).format("MMMM DD, YYYY"),u.get(e).then(function(r){b(r),v.hasResults=!!y(r);var i=h(e);n&&t.toggleCollapseByIds(i),a&&"function"==typeof a&&a(r)}).catch(D)};var y=function(e){return e&&Object.prototype.hasOwnProperty.call(e,"totalResults")?e.totalResults:0};v.keywordSearch=function(){var e=Object.assign({},v.requestModel);e.Keyword=v.keywords,e.Page=1,l.setQueryParams([{key:"term",val:v.keywords}])},v.filterByDate=function(){if(v.areDatesInvalid=!M(v.userStartDate,v.userEndDate),!v.areDatesInvalid){var e=Object.assign({},v.requestModel);e.StartDate=v.userStartDate,e.EndDate=v.userEndDate,e.Page=1,l.setQueryParams([{key:"startDate",val:v.userStartDate},{key:"endDate",val:v.userEndDate}])}},v.clearFilters=function(){w(),P(),l.clearQueryParams(),v.filterEvents(v.requestModel)},v.loadNextPage=function(){var e=Object.assign({},v.requestModel);e.Page+=1,v.requestModel=e,u.get(e).then(T).then(function(){a(function(){$(".event-date-bar").sticky(g)})})};var S=function(e,t){Object.prototype.hasOwnProperty.call(v.data,e)||(v.data[e]=t)};v.filterByTerms=function(e,t,n,a){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],i=Object.assign({},v.requestModel);switch(t.toLowerCase()){case"locations":E(i.Locations,e,n,t,a,r);break;case"agegroups":E(i.AgeGroups,e,n,t,a,r);break;case"eventtypes":E(i.EventsTypes,e,n,t,a,r)}v.filterEvents(i)};var D=function(){v.isLoading=!1,v.requestErrorMessage="There was a problem retrieving events. Please try again later."},E=function(e,t,n,a,r,i){if(n)e.push(t);else{var o=e.indexOf(t);-1!==o&&e.splice(o,1)}i&&l.updateQueryParams([{key:a,val:r}])},w=function(){v.requestModel=new d},P=function(){v.keywords="",v.userStartDate="",v.userEndDate=""},b=function(e){v.isLastPage=O(e.totalResults),v.eventGroups=e.eventGroups,v.isLoading=!1,v.hasResults=e.eventGroups.length,v.requestErrorMessage="",a(function(){$(".event-date-bar").sticky(g)})},T=function(e){v.isLastPage=O(e.totalResults),v.eventGroups=A(v.eventGroups,e.eventGroups)},O=function(e){return v.requestModel.Page*v.chunkSize>=e},M=function(e,t){return!(!e||!t)&&o.moment(e).isSameOrBefore(t)},C=function(e,t){return!(!e||!t)&&o.moment(e).isSame(t,"day")},A=function(e,t){var n=e,a=n[n.length-1];return angular.forEach(t,function(e){C(a.date,e.date)?a.events=a.events.concat(e.events):n.push(e)}),n},U=function(e){angular.element(e.currentTarget).closest(".expando-wrapper").find("i").toggleClass("fa-plus-square").toggleClass("fa-minus-square")},j=function(){return i.search().term&&i.search().term.length?i.search().term:""};angular.element(document).on("hide.bs.collapse",".expando-wrapper .collapse",U),angular.element(document).on("show.bs.collapse",".expando-wrapper .collapse",U);var L=function(e,t){if(!t)return-1;if(Object.prototype.hasOwnProperty.call(v.data,e)){var n=v.data[e].filter(function(e){return Object.prototype.hasOwnProperty.call(e,"Name")&&e.Name.toLowerCase().trim()===t.toLowerCase().trim()});return"locations"===e?n.length?n[0].LocationId:null:n.length?n[0].Id:null}return-1},k=function(e){return 0===Object.keys(e).length&&e.constructor===Object},R=function(e){return e&&e.toLowerCase().indexOf("date")>-1},Y=function(e){return e.replace(/^\w/,function(e){return e.toUpperCase()})},G=function(){var e=Object.assign({},v.requestModel),t=l.getQueryParams();if(k(t))return P(),v.requestModel;var n=j();e.Keyword=n,v.keywords=n;var a=F(t);return a&&(e.StartDate=a.startDate,e.EndDate=a.endDate),Object.keys(t).forEach(function(n){if(!R(n)){var a=t[n];l.getFiltersFromString(a).forEach(function(t){var a=L(n,t);if(a&&a>-1){var r=Y(n);r.indexOf("EventTypes")>-1&&(r="EventsTypes"),e[r]=N(e[r],a)}})}}),e},N=function(e,t){var n=e?e.slice():[];return e&&e.length&&e.includes(t)?n=e.filter(function(e){return e!==t}):n.push(t),n},q=function(e,t,n){S(t,e),n&&"function"==typeof n&&n()},I=function(e,t){t&&"function"==typeof t&&t(e)},x=function(e,t){var n=void 0,a=0;f.forEach(function(r){s.remoteServiceUrls[r]?n=s.remoteServiceUrls[r]:s.serviceUrls[r]&&(n=""+s.baseUrl+s.serviceUrls[r]),c.request(n).then(function(t){return q(t,r,function(){(a+=1)===f.length&&e()})},function(e){return I(e,t)})})},F=function(e){var t=l.getQueryParamValuesByKey(e,"startDate",!0),n=l.getQueryParamValuesByKey(e,"endDate",!0);return t||n?(v.userStartDate=t,v.userEndDate=n,{startDate:t||p(),endDate:n||m()}):null},B=function(e){var t=G();v.filterEvents(t,e)},_=function(){return u.get(v.requestModel).then(b).catch(D)};n.$on("$locationChangeSuccess",function(){w(),B()}),function(){x(function(){B(!0)},_)}()};n.$inject=["$document","$scope","$timeout","$animate","$location","$window","events.CONSTANTS","dataServices.eventsService","sharedFilters.filterHelperService","metaService","RequestModel"],e.controller("EventsPageCtrl",n)}(angular.module("eventsPageApp"),bcpl.boostrapCollapseHelper),function(e){var t=function(e,t,n){return{link:function(n,a,r){var i=n,o=function(){return t.moment().format()},s=function(){return t.moment().add(30,"d").format()};i.areDatesInvalid=!1;var u={dateFormat:"F d, Y",disable:[function(e){return t.moment(e).isBefore(new Date,"day")}],onChange:function(){e(function(){i.userStartDate=i.userStartDate||o(),i.userEndDate=i.userEndDate||s(),e(function(){t.moment(i.userStartDate).isSameOrBefore(i.userEndDate)?(i.areDatesInvalid=!1,i.filterByDate()):i.areDatesInvalid=!0})})}};i.openFlatpickr=function(e){document.querySelector("#"+e)._flatpickr.open()},angular.element(document).ready(function(){t.flatpickr("#start-date, #end-date",u)})},restrict:"E",templateUrl:n.templateUrls.datePickersTemplate,scope:{userStartDate:"=startDateModel",userEndDate:"=endDateModel",filterByDate:"=filterByDate"}}};t.$inject=["$timeout","$window","events.CONSTANTS"],e.directive("datePickers",t)}(angular.module("eventsPageApp")),function(e){var t=function(e,t,n){var a=function(e){var t=e,a={weekday:"long",year:"numeric",month:"long",day:"numeric"};t.eventScheduleString=function(e){return n.formatSchedule(e,e.EventLength,e.AllDay)},t.getDisplayDate=function(e){return e.date.toLocaleDateString("en-US",a)}};return{restrict:"E",templateUrl:t.templateUrls.eventsListTemplate,link:a,scope:{eventGroups:"="}}};t.$inject=["$timeout","events.CONSTANTS","dateUtilityService"],e.directive("eventsList",t)}(angular.module("eventsPageApp")),function(e){var t=function(e,t){return{link:function(e){var t=e;t.search=function(e,n,a){var r=e.item.Id||e.item.LocationId,i=e.item.Name||e.item.Id;t.searchFunction(r,n,a,i,t.items)},t.removeDisallowedCharacters=function(e){var t=/[^A-Za-z0-9-_.]/g;return e.trim().replace(t,"-")},t.isFilterChecked=function(e,n){var a=e&&"locations"===e?n.LocationId:n.Id;return!!t.activeFilters&&t.activeFilters.includes(a)}},restrict:"E",scope:{filterType:"@",choiceType:"@",searchFunction:"=",items:"=",activeFilters:"="},templateUrl:t.templateUrls.filtersExpandosTemplate}};t.$inject=["metaService","events.CONSTANTS"],e.directive("filtersExpandos",t)}(angular.module("eventsPageApp")),function(e){var t=function(e,t){return{link:function(e){var t=e;t.search=function(e,n,a){var r=e.item.Id||e.item.LocationId;t.searchFunction(r,n,a)},t.removeDisallowedCharacters=function(e){var t=/[^A-Za-z0-9-_.]/g;return e.trim().replace(t,"-")},t.isFilterChecked=function(e,n){var a=e&&"locations"===e?n.LocationId:n.Id;return t.activeFilters.includes(a)}},restrict:"E",scope:{filterType:"@",choiceType:"@",searchFunction:"=",activeFilters:"="},templateUrl:t.templateUrls.filtersTemplate}};t.$inject=["metaService","events.CONSTANTS"],e.directive("filters",t)}(angular.module("eventsPageApp")),function(e){var t=function(e){return{restrict:"E",templateUrl:e.templateUrls.loadMoreTemplate,scope:{loadNextPage:"=",chunkSize:"="}}};t.$inject=["events.CONSTANTS"],e.directive("loadMore",t)}(angular.module("eventsPageApp"));