"use strict";var namespacer=function(e){if(e){var t=e.split("."),n=window;if(t.length)for(var i=0;i<t.length;i+=1){var a=t[i];void 0===n[a]&&(n[a]={}),n=n[a]}}};namespacer("bcpl.utility"),bcpl.utility.flexDetect=function(e,t){return{init:function(n){void 0!==(n||e).createElement("div").style.flex||t("body").addClass("no-flex")}}}(document,jQuery),$(function(){bcpl.utility.flexDetect.init()}),namespacer("baltimoreCounty.utility"),baltimoreCounty.utility.numericStringTools=function(){var e=function(e){return/[$]/.test(e[0])&&e.length>1?1:0},t=function(e){var t=/^\.{0,1}(\d+[,.]{0,1})*\d+\b/,n=e.match(t);return n?parseFloat(n[0].split(",").join("")):e};return{getIndexOfFirstDigit:e,extractNumbersIfPresent:function(n){var i=e(n),a=n.slice(i),r=t(a);return"number"==typeof r?r:n},getFirstSetOfNumbersAndRemoveNonDigits:t}}(),namespacer("bcpl.utility"),bcpl.utility.querystringer=function(){return{getAsDictionary:function(e){var t=e||window;if(t.location.search){for(var n=t.location.search.slice(1),i=n.split("&"),a={},r=0;r<i.length;r+=1){var o=i[r].split("=");a[o[0].toLowerCase()]=2===o.length?o[1]:""}return a}return!1}}}(),namespacer("bcpl.utility"),bcpl.utility.windowShade=function(e){var t=void 0;return{cycle:function(n,i){var a=e("#window-shade");clearTimeout(t),a.slideDown(n,function(){t=setTimeout(function(){a.slideUp(n)},i)})}}}(jQuery),namespacer("bcpl"),bcpl.constants={baseApiUrl:"https://testservices.bcpl.info",basePageUrl:"/dist",keyCodes:{enter:13,escape:27,upArrow:38,downArrow:40,leftArrow:37,rightArrow:39,tab:9,space:32},search:{urls:{materialTypes:"/sebin/y/r/primaryMaterialType.json"}},homepage:{urls:{flipper:"/sebin/y/d/homepage-flipper.json",events:"/api/evanced/signup/events"}},shared:{urls:{alerts:"/api/structured-content/alerts",alertNotification:"/api/structured-content/alerts-notification"}}},namespacer("bcpl"),bcpl.alertBox=function(e,t,n){var i=void 0,a=void 0,r=function(e){e.data.$container.addClass("dismissed").closest(".emergency").removeClass("emergency"),sessionStorage&&sessionStorage.setItem("isAlertDismissed",!0)},o=function(n){var i=e("#alerts-template").html(),a=e("#alerts-target");if(i&&i.length){var r=t.compile(i);n&&n.IsEmergency&&(n.EmergencyClass="emergency"),a.html(r({alertData:n}))}d(!n)},s=function(t){t&&"function"==typeof t?e.ajax(n.baseApiUrl+n.shared.urls.alertNotification).then(function(e){return c(e,t)},function(){return l(t)}):console.error("A missing or invalid callback has been supplied.")},c=function(e,t){return e?t(e,!0):t(void 0,!1)},l=function(e){return e(void 0,!1)},u=function(e){e.addClass("dismissed").show()},d=function(t){i=e("#alert-box-dismiss"),a=e(".alert-container"),i.on("click",{$container:a},r),sessionStorage&&sessionStorage.getItem("isAlertDismissed")||t?u(a):setTimeout(function(){a.slideDown(250)},500)};return{init:function(){s(function(e){return o(e)})}}}(jQuery,Handlebars,bcpl.constants),$(function(){bcpl.alertBox.init()}),namespacer("bcpl"),bcpl.filter=function(e,t){var n={},i=function(t,n){t.find(".tag-list button").each(function(t,i){var a=e(i);a.text().trim().toLowerCase()===n&&a.addClass("active")})},a=function(e,t,n,a,r){var o=e.items,s=_.sortBy(o,function(e){return e.name}),c=e;c.items=s;var l=t.html();if(l&&l.length){var u=Handlebars.compile(l),d=u(c);n.html(d)}a&&r&&i(n,a),n.not(".collapse").is(":hidden")&&n.fadeIn(250)},r=function(e){var t=[];_.each(e,function(e){t=t.concat(e.attributes)});var n=_.uniq(t);return _.sortBy(n,function(e){return e})},o=function(e,t){return _.intersection(e,t.attributes).length===e.length},s=function(i,r){var s=[],c=[],l=e(i.currentTarget),u=e("#filters label"),d=u.has("input:checked"),v=l.closest("label").text().trim().toLowerCase(),f=l.prop("checked");!(!r||!r.shouldClearFilters)&&r.shouldClearFilters;u.not("input:checked").removeClass("active"),d.addClass("active"),d.each(function(e,t){s.push(t.innerText)}),_.each(n,function(e){o(s,e)&&c.push(e)}),t.cycle(250,2e3);var p={items:c,length:c.length};e("#results-display").trigger("bcpl.filter.changed",p).fadeOut(250,function(){a(p,e("#results-display-template"),e("#results-display"),v,f)})},c=function(t){n="string"==typeof t?JSON.parse(t):t,a({items:n,length:n.length},e("#results-display-template"),e("#results-display"));var i=r(n);a(i,e("#filters-template"),e("#filters"))},l=function(e,t,n){console.log("err",n)},u=function(t){e(t.currentTarget).siblings(".collapse-control").html('<i class="fa fa-minus"></i> Hide Filters')},d=function(t){e(t.currentTarget).siblings(".collapse-control").html('<i class="fa fa-plus"></i> Show Filters')},v=function(t){var n=e(t.currentTarget),i=n.text().trim().toLowerCase();e("#filters label").each(function(t,a){var r=e(a);r.text().trim().toLowerCase()===i?(r.find("input").trigger("click",{shouldClearFilters:!0}),n.toggleClass("active")):n.removeClass("active")})};return{init:function(t){t(c,l),document.createEvent("Event").initEvent("bcpl.filter.changed",!0,!0),e(document).on("click",".tag-list button",v),e(document).on("change","#filters input",s),e(document).on("show.bs.collapse","#filters",u),e(document).on("hide.bs.collapse","#filters",d)}}}(jQuery,bcpl.utility.windowShade),namespacer("bcpl"),bcpl.navigationSearch=function(e){var t=function(e,t){return parseFloat(e.width())<=t},n=function(t,n){n.removeClass("active"),t.removeClass("active"),e("#responsive-sliding-navigation .active").removeClass("active"),e("body").removeClass("nav-visible")},i=function(t){var n=t.data.$searchBox,i=t.data.$searchButtonActivator,a=t.data.$menu,r=e(t.currentTarget),o=t.data.$modalCover;i.removeClass("active"),n.removeClass("active"),r.addClass("active"),a.addClass("active"),o.addClass("active"),e("body").addClass("nav-visible")},a=function(n){n&&!t(e("body"),768)?e(".hero-callout-container").hide():e(".hero-callout-container").show()},r=function(e){var t=e.data.$searchBox,n=e.data.$searchButtonActivator,i=e.data.$hamburgerButton,r=t.is(":hidden");a(r),r?(n.addClass("active"),i.removeClass("active"),t.addClass("active")):(n.removeClass("active"),i.addClass("active"),t.removeClass("active"))},o=function(t){var n=e(t.currentTarget).siblings("input").first().val();t.data.browserWindow.location=bcpl.constants.basePageUrl+"/search.html?q="+n+"&page=1&resultsPerPage=10"},s=function(t){var i=t.data.$menu,a=t.data.$modalCover,r=e("#responsive-sliding-navigation .active");r.length?r.find(".submenu-wrapper").animate({right:"-300px"},250,function(){e(this).closest("li.active").removeClass("active")}):n(i,a)},c=void 0,l=function(t,i){var a=t.data.$menu,r=t.data.$modalCover;parseFloat(e("body").css("width"))>768&&a.hasClass("animatable")?(n(a,r),a.removeClass("animatable")):(clearTimeout(c),c=setTimeout(function(){a.addClass("animatable"),i&&"function"==typeof i&&i()},500))};return{init:function(){var t=e("#activate-search-button"),n=e("#search-box"),a=e("#search-button"),c=e("#hamburger-menu-button"),u=e("#responsive-sliding-navigation"),d=e("#responsive-sliding-navigation > .nav-back-button button"),v=e("#modal-cover");t.on("click",{$searchBox:n,$searchButtonActivator:t,$hamburgerButton:c},r),c.on("click",{$searchBox:n,$searchButtonActivator:t,$menu:u,$modalCover:v},i),a.on("click",{browserWindow:window},o),d.on("click",{$menu:u,$modalCover:v},s),v.on("click",{$menu:u,$modalCover:v},s),e(window).on("resize",{$menu:u,$modalCover:v},l),parseFloat(e("body").css("width"))<=768&&u.addClass("animatable")}}}(jQuery),$(function(){bcpl.navigationSearch.init()}),namespacer("bcpl"),bcpl.navigation=function(e,t){var n="#responsive-sliding-navigation>ul>li",i=function(e,t){return parseFloat(e.width())<=t},a=function(){return e("body").hasClass("nav-visible")},r=function(){return e("#responsive-sliding-navigation li.active a").first().focus()},o=function(e){return e.closest(n).find("button")},s=function(t,n){e(t).find("ul").attr("aria-hidden",!1),n&&"function"==typeof n&&n()},c=function(e,t){var n=a()?{right:"0px"}:{},i=a()?250:0;e.attr("aria-expanded",!0).closest("li").addClass("active").find(".submenu-wrapper").animate(n,i,function(){s(this,t)})},l=function(t,n){e(t).siblings("button").attr("aria-expanded",!1).closest("li").removeClass("active").attr("aria-hidden",!0),n&&"function"==typeof n&&n()},u=function(e,t){var n=a()?{right:"-300px"}:{},i=a()?250:0;e.siblings(".submenu-wrapper").animate(n,i,function(){l(this,t)})},d=function(){return u(e("#responsive-sliding-navigation").find("li.active button"))},v=function(){return e("#activate-search-button, #search-box").removeClass("active")},f=function(t){t&&!i(e("body"),768)?e(".hero-callout-container").hide():e(".hero-callout-container").show()},p=function(t){var n=e(t.currentTarget),i=n.closest("li").hasClass("active");v(),d(),i?u(n):c(n),f(!i)},m=function(n){var i=n.which||n.keyCode,a=e(n.currentTarget).closest("#responsive-sliding-navigation").find("li.active button");switch(i){case t.escape:u(a),a.focus(),f(!1)}},b=function(n){var i=n.which||n.keyCode,a=e(n.currentTarget);switch(i){case t.rightArrow:n.preventDefault(),u(a),a.parent().next().find("button").focus();break;case t.leftArrow:n.preventDefault(),u(a),a.parent().prev().find("button").focus();break;case t.downArrow:case t.upArrow:case t.enter:n.preventDefault(),d(),c(a),a.siblings(".submenu-wrapper").find("a:visible").first().focus()}},g=function(i){var a=i.which||i.keyCode,s=e(i.currentTarget),l=s.closest(".active, .clicked").find("a:visible"),v=o(s);switch(a){case t.upArrow:i.preventDefault(),l.index(s)-1==-1?l.eq(0).focus():l.eq(l.index(s)-1).focus();break;case t.leftArrow:i.preventDefault(),s.closest(n).prev("li").length&&u(v,function(){c(s.closest(n).prev("li").find("button")),r()});break;case t.downArrow:i.preventDefault(),l.eq(l.index(s)+1).focus();break;case t.rightArrow:i.preventDefault(),s.closest(n).next("li").length&&u(v,function(){c(s.closest(n).next("li").find("button")),r()});break;case t.space:case t.enter:i.preventDefault(),s[0].click(),d()}},h=function(){f(!0),v()},y=function(t){e(t.relatedTarget).closest("#responsive-sliding-navigation").length||i(e("body"),768)||(d(),f(!1))};e(document).on("mouseover","#responsive-sliding-navigation button, #responsive-sliding-navigation .submenu-wrapper",h),e(document).on("mouseleave","#responsive-sliding-navigation button, #responsive-sliding-navigation .submenu-wrapper",y),e(document).on("keydown","#responsive-sliding-navigation button",b),e(document).on("keydown","#responsive-sliding-navigation",m),e(document).on("click","#responsive-sliding-navigation button",p),e(document).on("keydown","#responsive-sliding-navigation a",g)}(jQuery,bcpl.constants.keyCodes),namespacer("bcpl"),bcpl.scrollToTop=function(e){var t=function(){e("body, html").animate({scrollTop:0},250)};return{init:function(){e(document).on("click","#scroll-to-top",t)}}}(jQuery),$(function(){return bcpl.scrollToTop.init()}),namespacer("bcpl"),bcpl.tabs=function(e){var t=function(t){var n=e(t.currentTarget),i=t.data.$tabContainer.find(".tab"),a=n.index();t.data.$tabControls.removeClass("active"),i.removeClass("active"),n.addClass("active"),i.eq(a).addClass("active")};return{init:function(){var n=e(".tabs"),i=n.find(".tab-control");i.on("click",{$tabContainer:n,$tabControls:i},t)}}}(jQuery),$(function(){bcpl.tabs.init()});